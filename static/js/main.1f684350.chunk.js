(this.webpackJsonpattendance_frontend=this.webpackJsonpattendance_frontend||[]).push([[0],{135:function(e,t,r){},136:function(e,t,r){},148:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(0),s=r(11),i=r.n(s),o=(r(135),r.p,r(136),r(37)),c=r.n(o),l=r(54),u=r(19),d=r(186),j=r(187),m=r(198),h=r(150),b=r(193),p=r(184),f=r(190),O=r(185),x=r(191),v=r(192),g=r(194),y=r(92),S=r.n(y),w=r(94),N=r(13),C=r(188),q=r(189),B=r(180),_=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,width:50},form:{width:"100%",marginTop:e.spacing(1),fontFamily:"rosemary"},submit:{margin:e.spacing(3,0,2),fontFamily:"Poppins",fontSize:18},font:{fontFamily:"Poppins"}}})),E=r(33),P=E.a({uid:E.b("Enter your ERP ID").required("ERP ID is required"),password:E.b("Enter your password").required("Password is required")}),k=E.a({uid:E.b("Enter your ERP ID").required("ERP ID is required"),password:E.b("Enter your password").required("Password is required").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character"),department:E.b("Select department").required("Department is Required"),Name:E.b("Enter Name").required("Name is Required").min(2,"Invalid Name"),section:E.b("Select section").required("Section is Required"),email:E.b("enter Email").required("Email is Required").email("invalid email")}),I=P,D=r(119),F=r(195),T=r(197),R=Object(B.a)((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw"}}}));function W(e){return Object(n.jsx)(F.a,Object(D.a)({elevation:6,variant:"filled"},e))}function A(e){var t=R();return Object(n.jsx)("div",{className:t.root,children:Object(n.jsx)(O.a,{size:100})})}var z=function(e){return Object(n.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.error,autoHideDuration:4e3,onClose:function(){return e.seterror({is_have:!1,type:e.type})},children:Object(n.jsx)(W,{severity:e.type,onClose:function(){return e.seterror({is_have:!1,type:e.type})},children:e.message})})},J="http://192.168.43.100:3001",V=function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={token:t,role:r},e.next=3,fetch(J+"/verify",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function $(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),r=t[0],s=t[1],i=Object(a.useState)(!0),o=Object(u.a)(i,2),d=o[0],j=o[1],m=Object(a.useState)(null),h=Object(u.a)(m,2),b=h[0],p=h[1],f=Object(a.useState)(null),O=Object(u.a)(f,2),x=O[0],v=O[1];return Object(a.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sessionchecking"),e.next=3,V(localStorage.token);case 3:t=e.sent,p(t.role),s(t.is_session_valid),t.is_session_valid||localStorage.removeItem("token"),j(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return localStorage.token?e():j(!1),function(){e(),p(null),s(!1),j(!0)}}),[x]),Object(n.jsxs)(n.Fragment,{children:[r?"student"===b?Object(n.jsx)(N.a,{to:"/student"}):Object(n.jsx)(N.a,{to:"/teacher"}):"",d?Object(n.jsx)(A,{}):Object(n.jsx)(L,{setrefresh:v})]})}function L(e){var t=_(),r=Object(a.useState)({is_have:!1,message:"this is an error",type:"error"}),s=Object(u.a)(r,2),i=s[0],o=s[1],c=Object(a.useState)(!1),l=Object(u.a)(c,2),y=l[0],N=l[1];var B=function(e){P.handleChange(e),P.handleBlur(e),P.validateForm().then((function(e){return P.errors=e}))},E=function(e){P.handleBlur(e)},P=Object(w.a)({initialValues:{uid:"",password:""},validationSchema:I,onSubmit:function(t){fetch(J+"/user/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){return function(t){P.setSubmitting(!1),t.logged_in?(P.resetForm(),localStorage.token=t.uuid,e.setrefresh(!0)):o({message:"Incorrect ERP ID or password",is_have:!0,type:"error"})}(t)})).catch((function(e){return P.setSubmitting(!1)||o({message:"No Internet Connection",is_have:!0,type:"error"})}))}});return Object(n.jsxs)(d.a,{className:t.font,component:"main",maxWidth:"xs",children:[Object(n.jsx)(j.a,{}),Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(m.a,{className:t.avatar,children:Object(n.jsx)(S.a,{})}),Object(n.jsx)(h.a,{className:t.font,component:"h1",variant:"h5",children:"Sign in"}),Object(n.jsx)(z,{error:i.is_have,type:"error",seterror:o,message:i.message}),Object(n.jsxs)("form",{className:t.form,onSubmit:P.handleSubmit,noValidate:!0,children:[Object(n.jsx)(b.a,{className:t.font,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"uid",label:"ERP ID",name:"uid",value:P.values.uid,onChange:B,onBlur:E,error:P.touched.uid&&Boolean(P.errors.uid),helperText:P.touched.uid&&P.errors.uid}),Object(n.jsx)(b.a,{className:t.font,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:y?"text":"password",InputProps:{endAdornment:Object(n.jsx)(p.a,{onClick:function(){return N(!y)},children:y?Object(n.jsx)(C.a,{}):Object(n.jsx)(q.a,{})})},id:"password",autoComplete:"current-password",value:P.values.password,onChange:B,onBlur:E,error:P.touched.password&&Boolean(P.errors.password),helperText:P.touched.password&&P.errors.password}),Object(n.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:P.isSubmitting,children:P.isSubmitting?Object(n.jsx)(O.a,{color:"secondary",size:30}):"Login"}),Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(x.a,{item:!0,xs:!0,children:Object(n.jsx)(v.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(v.a,{href:"/signup",variant:"body2",children:"Don't have an account?"})})]})]})]}),Object(n.jsx)(g.a,{mt:8,children:Object(n.jsx)(U,{})})]})}function U(){return Object(n.jsxs)(h.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(v.a,{color:"inherit",href:"#",children:"Niet"})," ",(new Date).getFullYear(),"."]})}var Y=r(199),Z=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,width:50},form:{width:"100%",marginTop:e.spacing(1),fontFamily:"rosemary"},submit:{margin:e.spacing(3,0,2),fontFamily:"Poppins",fontSize:18},font:{fontFamily:"Poppins"}}})),H=[{value:"Computer Science",svalue:"CSE"}],M=["A","B","C","D"];function G(){var e=Z(),t=Object(a.useState)({is_have:!1,message:"this is an error",type:"error"}),r=Object(u.a)(t,2),s=r[0],i=r[1],o=Object(a.useState)(!1),c=Object(u.a)(o,2),l=c[0],y=c[1];var N=function(e){_.handleChange(e),_.handleBlur(e),_.validateForm().then((function(e){return _.errors=e}))},B=function(e){_.handleBlur(e)},_=Object(w.a)({initialValues:{uid:"",password:"",department:"",Name:"",section:"",role:"student",email:""},validationSchema:k,onSubmit:function(e){fetch(J+"/user/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return function(e){_.setSubmitting(!1),console.log(e),e.status?(_.resetForm(),i({message:"Successfully Registered!",is_have:!0,type:"success"})):i({message:"Already Registered!",is_have:!0,type:"error"})}(e)})).catch((function(e){return i({message:"Server Error",is_have:!0,type:"error"})}))}});return Object(n.jsxs)(d.a,{className:e.font,component:"main",maxWidth:"xs",children:[Object(n.jsx)(j.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(m.a,{className:e.avatar,children:Object(n.jsx)(S.a,{})}),Object(n.jsx)(h.a,{className:e.font,component:"h1",variant:"h5",children:"Sign Up"}),Object(n.jsx)(z,{error:s.is_have,type:s.type,seterror:i,message:s.message}),Object(n.jsxs)("form",{className:e.form,onSubmit:_.handleSubmit,noValidate:!0,children:[Object(n.jsx)(b.a,{className:e.font,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Full Name",name:"Name",value:_.values.Name,onChange:N,onBlur:B,error:_.touched.Name&&Boolean(_.errors.Name),helperText:_.touched.Name&&_.errors.Name}),Object(n.jsx)(b.a,{className:e.font,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"uid",label:"ERP ID",name:"uid",value:_.values.uid,onChange:N,onBlur:B,error:_.touched.uid&&Boolean(_.errors.uid),helperText:_.touched.uid&&_.errors.uid}),Object(n.jsx)(b.a,{className:e.font,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",type:"email",name:"email",value:_.values.email,onChange:N,onBlur:B,error:_.touched.email&&Boolean(_.errors.email),helperText:_.touched.email&&_.errors.email}),Object(n.jsx)(b.a,{className:e.font,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:l?"text":"password",id:"password",InputProps:{endAdornment:Object(n.jsx)(p.a,{onClick:function(){return y(!l)},children:l?Object(n.jsx)(C.a,{}):Object(n.jsx)(q.a,{})})},autoComplete:"current-password",value:_.values.password,onChange:N,onBlur:B,error:_.touched.password&&Boolean(_.errors.password),helperText:_.touched.password&&_.errors.password}),Object(n.jsx)(b.a,{id:"department",select:!0,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Department",name:"department",value:_.values.department,onChange:N,onBlur:B,error:_.touched.department&&Boolean(_.errors.department),helperText:_.touched.department&&_.errors.department,children:H.map((function(e){return Object(n.jsx)(Y.a,{value:e.svalue,children:e.value},e.value)}))}),Object(n.jsx)(b.a,{id:"section",select:!0,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Section",name:"section",value:_.values.section,onChange:N,onBlur:B,error:_.touched.section&&Boolean(_.errors.section),helperText:_.touched.section&&_.errors.section,children:M.map((function(e){return Object(n.jsx)(Y.a,{value:e,children:e},e)}))}),Object(n.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:_.isSubmitting,children:_.isSubmitting?Object(n.jsx)(O.a,{color:"secondary",size:30}):"Register"}),Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(x.a,{item:!0,xs:!0,children:Object(n.jsx)(v.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(v.a,{href:"/",variant:"body2",children:"Already Register?"})})]})]})]}),Object(n.jsx)(g.a,{mt:8,children:Object(n.jsx)(K,{})})]})}function K(){return Object(n.jsxs)(h.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(v.a,{color:"inherit",href:"#",children:"Niet"})," ",(new Date).getFullYear(),".",Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})}var Q=r(79);function X(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Welcome student"}),Array(100).fill().map((function(e){return Object(n.jsx)(G,{})}))]})}var ee=function(){return Object(n.jsx)(X,{})};function te(){return Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"Welcome Teacher"})})}var re=function(){return Object(n.jsx)(te,{})};var ne=function(e){var t=Object(a.useState)(!0),r=Object(u.a)(t,2),s=r[0],i=r[1],o=Object(a.useState)(!0),d=Object(u.a)(o,2),j=d[0],m=d[1];return Object(a.useEffect)((function(){function t(){return r.apply(this,arguments)}function r(){return(r=Object(l.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(localStorage.token,e.role);case 2:r=t.sent,i(r.is_session_valid),m(!1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return localStorage.token?t():(i(!1),m(!0)),function(){t()}}),[]),Object(n.jsxs)(n.Fragment,{children:[s?"":localStorage.removeItem("token")||Object(n.jsx)(N.a,{to:"/"}),j?Object(n.jsx)(A,{}):Object(n.jsx)(e.component,{})]})};var ae=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(Q.a,{basename:"https://lavdeep123.github.io/Attendance_frontend",children:Object(n.jsxs)(N.d,{children:[Object(n.jsx)(N.b,{exact:!0,path:"/",component:$}),Object(n.jsx)(N.b,{exact:!0,path:"/signup",component:G}),Object(n.jsx)(ne,{exact:!0,path:"/student",component:ee,role:"student"}),Object(n.jsx)(ne,{exact:!0,path:"/teacher",component:re,role:"teacher"}),Object(n.jsx)(N.a,{to:"/"})]})})})};i.a.render(Object(n.jsx)(ae,{}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.1f684350.chunk.js.map